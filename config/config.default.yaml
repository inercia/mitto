# Mitto Default Configuration
# This file contains the default settings that are used when settings.json doesn't exist.
# Your personal settings are stored in settings.json in your Mitto data directory:
#   - macOS: ~/Library/Application Support/Mitto/settings.json
#   - Linux: ~/.local/share/mitto/settings.json
#   - Windows: %APPDATA%\Mitto\settings.json

# ACP (Agent Communication Protocol) servers
# Prompts are now loaded from MITTO_DIR/prompts/builtin/ directory
# Run 'mitto prompts update-builtin' to update builtin prompts after upgrading
acp:
  - auggie:
      command: auggie --acp

  - claude-code:
      command: npx -y @zed-industries/claude-code-acp@latest

# Web server configuration
web:
  host: 127.0.0.1  # Local listener always binds to 127.0.0.1 for security
  port: 8080       # Local port (use 0 for random)
  external_port: -1  # External port when auth is enabled (-1 = disabled, 0 = random, >0 = specific port)
  api_prefix: /mitto  # URL prefix for API endpoints (security through obscurity). Set to "" to disable.
  theme: v2  # Options: "default", "v2" (modern theme)

  # hooks:
  #   up:
  #     command: echo "ngrok http ${PORT}"
  #     name: "ngrok"
  #   # down:
  #   #   command: echo "Shutting down server on port ${PORT}"
  #   #   name: "cleanup"

  # auth:
  #   simple:
  #     username: admin
  #     password: your-secure-password  # Use a strong password
  #   allow:
  #     ips:  # IP addresses/CIDR ranges that bypass authentication
  #       - 127.0.0.1
  #       - ::1
  #       - 192.168.0.0/24

  # security:
  #   # Trusted reverse proxies - only trust X-Forwarded-For from these IPs
  #   # Required when running behind nginx, Caddy, or cloud load balancers
  #   trusted_proxies:
  #     - 127.0.0.1
  #     - 10.0.0.0/8
  #     - 172.16.0.0/12
  #     - 192.168.0.0/16
  #
  #   # Allowed origins for WebSocket connections (CSRF protection)
  #   # If empty, only same-origin requests are allowed
  #   # Use "*" to allow all origins (not recommended for production)
  #   allowed_origins:
  #     - https://your-domain.com
  #     - https://your-tunnel.ngrok.io
  #
  #   # Rate limiting for API requests (per IP)
  #   rate_limit_rps: 10        # Requests per second (default: 10)
  #   rate_limit_burst: 20      # Maximum burst size (default: 20)
  #
  #   # WebSocket connection limits (per IP)
  #   max_ws_connections_per_ip: 10  # Default: 10
  #
  #   # Maximum WebSocket message size in bytes
  #   max_ws_message_size: 65536     # Default: 64KB

# UI settings
# ui:
#   # Confirmation dialogs - set to false to skip confirmations
#   confirmations:
#     delete_session: true  # Confirm before deleting a conversation (default: true)
#     quit_with_running_sessions: true  # Confirm before quitting with running conversations (default: true, macOS only)
#
#   # macOS desktop app settings (only applies to Mitto.app)
#   mac:
#     # Global hotkeys
#     hotkeys:
#       show_hide:
#         enabled: true
#         key: "cmd+ctrl+m"  # Hotkey to toggle app visibility
#     # Notification sounds
#     notifications:
#       sounds:
#         agent_completed: true  # Play a sound when the agent finishes
#     # Window behavior
#     show_in_all_spaces: false  # Show window in all macOS Spaces (requires restart)
#     # Login item (requires macOS 13+)
#     start_at_login: false  # Launch Mitto automatically when you log in

# Conversation processing - transformations applied to user messages
# Processors are applied in order. Each processor specifies:
#   - when: "first" (first message only), "all" (every message), "all-except-first"
#   - position: "prepend" (before message) or "append" (after message)
#   - text: the content to insert
#
# Global processors defined here apply to all workspaces.
# Workspace-specific processors can be defined in <workspace>/.mittorc
# and will be merged with global processors (or override them with override: true).
#
# conversations:
#   processing:
#     processors:
#       # Add system context to the first message
#       - when: first
#         position: prepend
#         text: |
#           You are a helpful AI coding assistant.
#           Please follow best practices and be concise.
#
#           ---
#
#       # Add a reminder to all messages
#       - when: all
#         position: append
#         text: "\n\n[Remember: Provide working code examples]"
#
#       # Add continuation context after the first message
#       # - when: all-except-first
#       #   position: prepend
#       #   text: "[Continuing from previous context]\n\n"
#
#   # Message queue configuration
#   # When enabled, messages sent while the agent is busy are queued and
#   # automatically delivered when the agent becomes idle.
#   #
#   # queue:
#   #   # Enable/disable automatic queue processing (default: true)
#   #   # When false, messages remain in queue until manually sent or deleted
#   #   enabled: true
#   #
#   #   # Delay in seconds before sending the next queued message (default: 0)
#   #   # Useful to give users time to review agent responses before next message
#   #   delay_seconds: 0
#   #
#   #   # Maximum number of messages allowed in the queue (default: 10)
#   #   # When the queue is full, new messages are rejected with an error
#   #   max_size: 10
#   #
#   #   # Automatically generate short titles for queued messages (default: true)
#   #   # Uses the auxiliary conversation to create 2-3 word titles
#   #   auto_generate_titles: true

# Follow-up suggestions configuration
# When enabled, agent messages are analyzed asynchronously to identify
# questions or follow-up prompts, and suggested response buttons are
# displayed to the user.
conversations:
  action_buttons:
    enabled: true  # Enable follow-up suggestions by default
